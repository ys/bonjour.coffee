!function(){var e=function(t){var n=new e.Builder;return n.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),n.searchPipeline.add(e.stemmer),t.call(n,n),n.build()};e.version="2.3.9",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),e.utils.asString=function(e){return e==null?"":e.toString()},e.utils.clone=function(e){if(e==null)return e;for(var t,n,s=Object.create(null),i=Object.keys(e),o=0;o<i.length;o++)if(n=i[o],t=e[n],Array.isArray(t))s[n]=t.slice();else{if("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t)throw new TypeError("clone is not deep and does not support nested objects");s[n]=t}return s},e.FieldRef=function(e,t,n){this.docRef=e,this.fieldName=t,this._stringValue=n},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){if(n=t.indexOf(e.FieldRef.joiner),n===-1)throw"malformed field ref string";var n,s=t.slice(0,n),o=t.slice(n+1);return new e.FieldRef(o,s,t)},e.FieldRef.prototype.toString=function(){return void 0==this._stringValue&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue},e.Set=function(e){if(this.elements=Object.create(null),e){this.length=e.length;for(var t=0;t<this.length;t++)this.elements[e[t]]=!0}else this.length=0},e.Set.complete={intersect:function(e){return e},union:function(){return this},contains:function(){return!0}},e.Set.empty={intersect:function(){return this},union:function(e){return e},contains:function(){return!1}},e.Set.prototype.contains=function(e){return!!this.elements[e]},e.Set.prototype.intersect=function(t){var n,s,o,i,a,r=[];if(t===e.Set.complete)return this;if(t===e.Set.empty)return t;this.length<t.length?(s=this,o=t):(s=t,o=this),i=Object.keys(s.elements);for(n=0;n<i.length;n++)a=i[n],a in o.elements&&r.push(a);return new e.Set(r)},e.Set.prototype.union=function(t){return t===e.Set.complete?e.Set.complete:t===e.Set.empty?this:new e.Set(Object.keys(this.elements).concat(Object.keys(t.elements)))},e.idf=function(e,t){var s,o,n=0;for(s in e)"_index"!=s&&(n+=Object.keys(e[s]).length);return o=(t-n+.5)/(n+.5),Math.log(1+Math.abs(o))},e.Token=function(e,t){this.str=e||"",this.metadata=t||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(e){return e},new e.Token(t(this.str,this.metadata),this.metadata)},e.tokenizer=function(t,n){if(t==null)return[];if(Array.isArray(t))return t.map(function(t){return new e.Token(e.utils.asString(t).toLowerCase(),e.utils.clone(n))});for(var i,c,d,a=t.toString().toLowerCase(),l=a.length,r=[],s=0,o=0;s<=l;s++)d=a.charAt(s),c=s-o,(d.match(e.tokenizer.separator)||s==l)&&(c>0&&(i=e.utils.clone(n)||{},i.position=[o,c],i.index=r.length,r.push(new e.Token(a.slice(o,s),i))),o=s+1);return r},e.tokenizer.separator=/[\s-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,n){n in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+n),t.label=n,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var n=t.label&&t.label in this.registeredFunctions;n||e.utils.warn(`Function is not registered with pipeline. This may cause problems when serialising the index.
`,t)},e.Pipeline.load=function(t){var n=new e.Pipeline;return t.forEach(function(t){var s=e.Pipeline.registeredFunctions[t];if(!s)throw new Error("Cannot load unregistered function: "+t);n.add(s)}),n},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var s=this._stack.indexOf(t);if(s==-1)throw new Error("Cannot find existingFn");s+=1,this._stack.splice(s,0,n)},e.Pipeline.prototype.before=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var s=this._stack.indexOf(t);if(s==-1)throw new Error("Cannot find existingFn");this._stack.splice(s,0,n)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);t!=-1&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(a=this._stack.length,n=0;n<a;n++){for(var t,n,o,a,r=this._stack[n],i=[],s=0;s<e.length;s++)if(t=r(e[s],s,e),t!=null&&""!==t)if(Array.isArray(t))for(o=0;o<t.length;o++)i.push(t[o]);else i.push(t);e=i}return e},e.Pipeline.prototype.runString=function(t,n){var s=new e.Token(t,n);return this.run([s]).map(function(e){return e.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(e){this._magnitude=0,this.elements=e||[]},e.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var s=0,i=this.elements.length/2,o=i-s,t=Math.floor(o/2),n=this.elements[2*t];o>1&&(n<e&&(s=t),n>e&&(i=t),n!=e);)o=i-s,t=s+Math.floor(o/2),n=this.elements[2*t];return n==e?2*t:n>e?2*t:n<e?2*(t+1):void 0},e.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(e,t,n){this._magnitude=0;var s=this.positionForIndex(e);this.elements[s]==e?this.elements[s+1]=n(this.elements[s+1],t):this.elements.splice(s,0,e,t)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,n=0,s=this.elements.length,e=1;e<s;e+=2)t=this.elements[e],n+=t*t;return this._magnitude=Math.sqrt(n)},e.Vector.prototype.dot=function(e){for(var r=0,i=this.elements,a=e.elements,c=i.length,l=a.length,s=0,o=0,t=0,n=0;t<c&&n<l;)s=i[t],o=a[n],s<o?t+=2:s>o?n+=2:s==o&&(r+=i[t+1]*a[n+1],t+=2,n+=2);return r},e.Vector.prototype.similarity=function(e){return this.dot(e)/this.magnitude()||0},e.Vector.prototype.toArray=function(){for(var t=new Array(this.elements.length/2),e=1,n=0;e<this.elements.length;e+=2,n++)t[n]=this.elements[e];return t},e.Vector.prototype.toJSON=function(){return this.elements},e.stemmer=function(){var f={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},b={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},u="[^aeiou]",s="[aeiouy]",e=u+"[^aeiouy]*",t=s+"[aeiou]*",d="^("+e+")?"+t+e,j="^("+e+")?"+t+e+"("+t+")?$",c="^("+e+")?"+t+e+t+e,l="^("+e+")?"+s,o=new RegExp(d),n=new RegExp(c),h=new RegExp(j),m=new RegExp(l),a=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,v=/^(.+?)(ed|ing)$/,i=/.$/,r=/(at|bl|iz)$/,y=new RegExp("([^aeiouylsz])\\1$"),_=new RegExp("^"+e+s+"[^aeiouwxy]$"),w=/^(.+?[^aeiou])y$/,O=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,x=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,C=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,E=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,A=/ll$/,S=new RegExp("^"+e+s+"[^aeiouwxy]$"),M=function(e){if(e.length<3)return e;if(d=e.substr(0,1),"y"==d&&(e=d.toUpperCase()+e.substr(1)),t=a,c=p,t.test(e)?e=e.replace(t,"$1$2"):c.test(e)&&(e=e.replace(c,"$1$2")),t=g,c=v,t.test(e)){var t,s,c,d,u,j,M,l=t.exec(e);t=o,t.test(l[1])&&(t=i,e=e.replace(t,""))}else c.test(e)&&(l=c.exec(e),s=l[1],c=m,c.test(s)&&(e=s,c=r,j=y,M=_,c.test(e)?e+="e":j.test(e)?(t=i,e=e.replace(t,"")):M.test(e)&&(e+="e")));return(t=w,t.test(e))&&(l=t.exec(e),s=l[1],e=s+"i"),(t=O,t.test(e))&&(l=t.exec(e),s=l[1],u=l[2],t=o,t.test(s)&&(e=s+f[u])),(t=x,t.test(e))&&(l=t.exec(e),s=l[1],u=l[2],t=o,t.test(s)&&(e=s+b[u])),t=C,c=E,t.test(e)?(l=t.exec(e),s=l[1],t=n,t.test(s)&&(e=s)):c.test(e)&&(l=c.exec(e),s=l[1]+l[2],c=n,c.test(s)&&(e=s)),(t=k,t.test(e))&&(l=t.exec(e),s=l[1],t=n,c=h,j=S,(t.test(s)||c.test(s)&&!j.test(s))&&(e=s)),t=A,c=n,t.test(e)&&c.test(e)&&(t=i,e=e.replace(t,"")),"y"==d&&(e=d.toLowerCase()+e.substr(1)),e};return function(e){return e.update(M)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenSet=function(){this.final=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var n=new e.TokenSet.Builder,s=0,o=t.length;s<o;s++)n.insert(t[s]);return n.finish(),n.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,n){for(var s,i,a,r,c,l,d,h,u=new e.TokenSet,o=[{node:u,editsRemaining:n,str:t}];o.length;)s=o.pop(),s.str.length>0&&(l=s.str.charAt(0),l in s.node.edges?i=s.node.edges[l]:(i=new e.TokenSet,s.node.edges[l]=i),1==s.str.length&&(i.final=!0),o.push({node:i,editsRemaining:s.editsRemaining,str:s.str.slice(1)})),0!=s.editsRemaining&&("*"in s.node.edges?(a=s.node.edges["*"]):(a=new e.TokenSet,s.node.edges["*"]=a),(0==s.str.length&&(a.final=!0),o.push({node:a,editsRemaining:s.editsRemaining-1,str:s.str}),s.str.length>1&&o.push({node:s.node,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)}),1==s.str.length&&(s.node.final=!0),s.str.length>=1)&&("*"in s.node.edges?(r=s.node.edges["*"]):(r=new e.TokenSet,s.node.edges["*"]=r),1==s.str.length&&(r.final=!0),o.push({node:r,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)})),s.str.length>1&&(h=s.str.charAt(0),d=s.str.charAt(1),d in s.node.edges?c=s.node.edges[d]:(c=new e.TokenSet,s.node.edges[d]=c),1==s.str.length&&(c.final=!0),o.push({node:c,editsRemaining:s.editsRemaining-1,str:h+s.str.slice(2)})));return u},e.TokenSet.fromString=function(t){for(var o,i,a,n=new e.TokenSet,c=n,s=0,r=t.length;s<r;s++)o=t[s],a=s==r-1,"*"==o?(n.edges[o]=n,n.final=a):(i=new e.TokenSet,i.final=a,n.edges[o]=i,n=i);return c},e.TokenSet.prototype.toArray=function(){for(s=[],t=[{prefix:"",node:this}];t.length;){var t,n,s,o,e=t.pop(),i=Object.keys(e.node.edges),a=i.length;e.node.final&&(e.prefix.charAt(0),s.push(e.prefix));for(n=0;n<a;n++)o=i[n],t.push({prefix:e.prefix.concat(o),node:e.node.edges[o]})}return s},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var n,o,e=this.final?"1":"0",s=Object.keys(this.edges).sort(),i=s.length,t=0;t<i;t++)n=s[t],o=this.edges[n],e=e+n+o.id;return e},e.TokenSet.prototype.intersect=function(t){for(var f=new e.TokenSet,n=void 0,c=[{qNode:t,output:f,node:this}];c.length;){n=c.pop();for(var o,i,a,l=Object.keys(n.qNode.edges),g=l.length,d=Object.keys(n.node.edges),p=d.length,r=0;r<g;r++)for(a=l[r],i=0;i<p;i++)if(o=d[i],o==a||"*"==a){var u=n.node.edges[o],h=n.qNode.edges[a],m=u.final&&h.final,s=void 0;o in n.output.edges?(s=n.output.edges[o],s.final=s.final||m):(s=new e.TokenSet,s.final=m,n.output.edges[o]=s),c.push({qNode:h,output:s,node:u})}}return f},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){if(o=0,t<this.previousWord)throw new Error("Out of order word insertion");for(n=0;n<t.length&&n<this.previousWord.length&&t[n]==this.previousWord[n];n++)o++;this.minimize(o),s=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(n=o;n<t.length;n++){var n,s,o,i=new e.TokenSet,a=t[n];s.edges[a]=i,this.uncheckedNodes.push({parent:s,char:a,child:i}),s=i}s.final=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(e){for(n=this.uncheckedNodes.length-1;n>=e;n--){var n,t=this.uncheckedNodes[n],s=t.child.toString();s in this.minimizedNodes?t.parent.edges[t.char]=this.minimizedNodes[s]:(t.child._str=s,this.minimizedNodes[s]=t.child),this.uncheckedNodes.pop()}},e.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},e.Index.prototype.search=function(t){return this.query(function(n){var s=new e.QueryParser(t,n);s.parse()})},e.Index.prototype.query=function(t){for(var n,i,a,c,d,f,p,g,b,_,w,x,z,N,H,m=new e.Query(this.fields),l=Object.create(null),C=Object.create(null),L=Object.create(null),r=Object.create(null),u=Object.create(null),s=0;s<this.fields.length;s++)C[this.fields[s]]=new e.Vector;t.call(m,m);for(s=0;s<m.clauses.length;s++){for(var o=m.clauses[s],E=null,k=e.Set.empty,E=o.usePipeline?this.pipeline.runString(o.term,{fields:o.fields}):[o.term],f=0;f<E.length;f++){if(N=E[f],o.term=N,z=e.TokenSet.fromClause(o),g=this.tokenSet.intersect(z).toArray(),0===g.length&&o.presence===e.Query.presence.REQUIRED){for(i=0;i<o.fields.length;i++)n=o.fields[i],r[n]=e.Set.empty;break}for(b=0;b<g.length;b++)for(var v=g[b],M=this.invertedIndex[v],B=M._index,i=0;i<o.fields.length;i++){var n=o.fields[i],I=M[n],O=Object.keys(I),P=v+"/"+n,R=new e.Set(O);if(o.presence==e.Query.presence.REQUIRED&&(k=k.union(R),void 0===r[n]&&(r[n]=e.Set.complete)),o.presence!=e.Query.presence.PROHIBITED){if(C[n].upsert(B,o.boost,function(e,t){return e+t}),!L[P]){for(p=0;p<O.length;p++){var T,F=O[p],c=new e.FieldRef(F,n),A=I[F];void 0===(T=l[c])?l[c]=new e.MatchData(v,n,A):T.add(v,n,A)}L[P]=!0}}else void 0===u[n]&&(u[n]=e.Set.empty),u[n]=u[n].union(R)}}if(o.presence===e.Query.presence.REQUIRED)for(i=0;i<o.fields.length;i++)n=o.fields[i],r[n]=r[n].intersect(k)}for(var y=e.Set.complete,j=e.Set.empty,s=0;s<this.fields.length;s++)n=this.fields[s],r[n]&&(y=y.intersect(r[n])),u[n]&&(j=j.union(u[n]));var h=Object.keys(l),D=[],S=Object.create(null);if(m.isNegated()){h=Object.keys(this.fieldVectors);for(s=0;s<h.length;s++)c=h[s],a=e.FieldRef.fromString(c),l[c]=new e.MatchData}for(s=0;s<h.length;s++)a=e.FieldRef.fromString(h[s]),d=a.docRef,y.contains(d)&&!j.contains(d)&&(H=this.fieldVectors[a],w=C[a.fieldName].similarity(H),void 0!==(x=S[d])?(x.score+=w,x.matchData.combine(l[a])):(_={ref:d,score:w,matchData:l[a]},S[d]=_,D.push(_)));return D.sort(function(e,t){return t.score-e.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),n=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:n,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var n,s={},r={},c=t.fieldVectors,l=Object.create(null),d=t.invertedIndex,i=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(n=0;n<c.length;n++){var o=c[n],m=o[0],h=o[1];r[m]=new e.Vector(h)}for(n=0;n<d.length;n++){var o=d[n],a=o[0],f=o[1];i.insert(a),l[a]=f}return i.finish(),s.fields=t.fields,s.fieldVectors=r,s.invertedIndex=l,s.tokenSet=i.root,s.pipeline=u,new e.Index(s)},e.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(e){this._ref=e},e.Builder.prototype.field=function(e,t){if(/\//.test(e))throw new RangeError("Field '"+e+"' contains illegal character '/'");this._fields[e]=t||{}},e.Builder.prototype.b=function(e){e<0?this._b=0:e>1?this._b=1:this._b=e},e.Builder.prototype.k1=function(e){this._k1=e},e.Builder.prototype.add=function(t,n){i=t[this._ref],a=Object.keys(this._fields),this._documents[i]=n||{},this.documentCount+=1;for(c=0;c<a.length;c++){var s,i,a,r,c,l,d,u,m,v,o=a[c],g=this._fields[o].extractor,j=g?g(t):t[o],b=this.tokenizer(j,{fields:[o]}),p=this.pipeline.run(b),f=new e.FieldRef(i,o),h=Object.create(null);this.fieldTermFrequencies[f]=h,this.fieldLengths[f]=0,this.fieldLengths[f]+=p.length;for(m=0;m<p.length;m++){if(s=p[m],void 0==h[s]&&(h[s]=0),h[s]+=1,void 0==this.invertedIndex[s]){u=Object.create(null),u._index=this.termIndex,this.termIndex+=1;for(d=0;d<a.length;d++)u[a[d]]=Object.create(null);this.invertedIndex[s]=u}void 0==this.invertedIndex[s][o][i]&&(this.invertedIndex[s][o][i]=Object.create(null));for(l=0;l<this.metadataWhitelist.length;l++)r=this.metadataWhitelist[l],v=s.metadata[r],void 0==this.invertedIndex[s][o][i][r]&&(this.invertedIndex[s][o][i][r]=[]),this.invertedIndex[s][o][i][r].push(v)}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var n,i,a,r,c=Object.keys(this.fieldLengths),l=c.length,s={},o={},t=0;t<l;t++)a=e.FieldRef.fromString(c[t]),n=a.fieldName,o[n]||(o[n]=0),o[n]+=1,s[n]||(s[n]=0),s[n]+=this.fieldLengths[a];for(r=Object.keys(this._fields),t=0;t<r.length;t++)i=r[t],s[i]=s[i]/o[i];this.averageFieldLength=s},e.Builder.prototype.createFieldVectors=function(){for(var c={},f=Object.keys(this.fieldTermFrequencies),y=f.length,a=Object.create(null),i=0;i<y;i++){for(var n=e.FieldRef.fromString(f[i]),d=n.fieldName,g=this.fieldLengths[n],u=new e.Vector,h=this.fieldTermFrequencies[n],m=Object.keys(h),j=m.length,b=this._fields[d].boost||1,v=this._documents[n.docRef].boost||1,r=0;r<j;r++){var s,o,p,t=m[r],l=h[t],_=this.invertedIndex[t]._index;void 0===a[t]?(s=e.idf(this.invertedIndex[t],this.documentCount),a[t]=s):s=a[t],o=s*((this._k1+1)*l)/(this._k1*(1-this._b+this._b*(g/this.averageFieldLength[d]))+l),o*=b,o*=v,p=Math.round(1e3*o)/1e3,u.insert(_,p)}c[n]=u}this.fieldVectors=c},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},e.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.MatchData=function(e,t,n){for(var o,i=Object.create(null),a=Object.keys(n||{}),s=0;s<a.length;s++)o=a[s],i[o]=n[o].slice();this.metadata=Object.create(null),void 0!==e&&(this.metadata[e]=Object.create(null),this.metadata[e][t]=i)},e.MatchData.prototype.combine=function(e){for(var t,n,s,o,i,r,c,l=Object.keys(e.metadata),a=0;a<l.length;a++){t=l[a],r=Object.keys(e.metadata[t]),void 0==this.metadata[t]&&(this.metadata[t]=Object.create(null));for(o=0;o<r.length;o++){n=r[o],c=Object.keys(e.metadata[t][n]),void 0==this.metadata[t][n]&&(this.metadata[t][n]=Object.create(null));for(i=0;i<c.length;i++)s=c[i],void 0==this.metadata[t][n][s]?this.metadata[t][n][s]=e.metadata[t][n][s]:this.metadata[t][n][s]=this.metadata[t][n][s].concat(e.metadata[t][n][s])}}},e.MatchData.prototype.add=function(e,t,n){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=n);if(!(t in this.metadata[e]))return void(this.metadata[e][t]=n);for(var s,i=Object.keys(n),o=0;o<i.length;o++)s=i[o],s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(n[s]):this.metadata[e][t][s]=n[s]},e.Query=function(e){this.clauses=[],this.allFields=e},e.Query.wildcard=new String("*"),e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),"presence"in t||(t.presence=e.Query.presence.OPTIONAL),this.clauses.push(t),this},e.Query.prototype.isNegated=function(){for(var t=0;t<this.clauses.length;t++)if(this.clauses[t].presence!=e.Query.presence.PROHIBITED)return!1;return!0},e.Query.prototype.term=function(t,n){if(Array.isArray(t))return t.forEach(function(t){this.term(t,e.utils.clone(n))},this),this;var s=n||{};return s.term=t.toString(),this.clause(s),this},e.QueryParseError=function(e,t,n){this.name="QueryParseError",this.message=e,this.start=t,this.end=n},e.QueryParseError.prototype=new Error,e.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,n=this.pos,s=0;s<this.escapeCharPositions.length;s++)n=this.escapeCharPositions[s],e.push(this.str.slice(t,n)),t=n+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},e.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,n;do t=this.next(),n=t.charCodeAt(0);while(n>47&&n<58)t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.PRESENCE="PRESENCE",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var n=t.next();if(n==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(92!=n.charCodeAt(0)){{if(":"==n)return e.QueryLexer.lexField;if("~"==n)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if("^"==n)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if("+"==n&&1===t.width())return t.emit(e.QueryLexer.PRESENCE),e.QueryLexer.lexText;if("-"==n&&1===t.width())return t.emit(e.QueryLexer.PRESENCE),e.QueryLexer.lexText;if(n.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}}else t.escapeCharacter()}},e.QueryParser=function(t,n){this.lexer=new e.QueryLexer(t),this.query=n,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseClause;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},e.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},e.QueryParser.parseClause=function(t){var s,n=t.peekLexeme();if(n!=null)switch(n.type){case e.QueryLexer.PRESENCE:return e.QueryParser.parsePresence;case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw s="expected either a field or a term, found "+n.type,n.str.length>=1&&(s+=" with value '"+n.str+"'"),new e.QueryParseError(s,n.start,n.end)}},e.QueryParser.parsePresence=function(t){var s,o,n=t.consumeLexeme();if(n!=null){switch(n.str){case"-":t.currentClause.presence=e.Query.presence.PROHIBITED;break;case"+":t.currentClause.presence=e.Query.presence.REQUIRED;break;default:throw s="unrecognised presence operator'"+n.str+"'",new e.QueryParseError(s,n.start,n.end)}if(o=t.peekLexeme(),o==null)throw s="expecting term or field, found nothing",new e.QueryParseError(s,n.start,n.end);switch(o.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw s="expecting term or field, found '"+o.type+"'",new e.QueryParseError(s,o.start,o.end)}}},e.QueryParser.parseField=function(t){if(n=t.consumeLexeme(),n!=null){if(t.query.allFields.indexOf(n.str)==-1){var n,s,i=t.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),o="unrecognised field '"+n.str+"', possible fields: "+i;throw new e.QueryParseError(o,n.start,n.end)}if(t.currentClause.fields=[n.str],s=t.peekLexeme(),s==null)throw o="expecting term, found nothing",new e.QueryParseError(o,n.start,n.end);switch(s.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw o="expecting term, found '"+s.type+"'",new e.QueryParseError(o,s.start,s.end)}}},e.QueryParser.parseTerm=function(t){var n,o,s=t.consumeLexeme();if(s!=null){if(t.currentClause.term=s.str.toLowerCase(),s.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1),n=t.peekLexeme(),n==null)return void t.nextClause();switch(n.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:throw o="Unexpected lexeme type '"+n.type+"'",new e.QueryParseError(o,n.start,n.end)}}},e.QueryParser.parseEditDistance=function(t){var n,o,i,s=t.consumeLexeme();if(s!=null){if(i=parseInt(s.str,10),isNaN(i))throw o="edit distance must be numeric",new e.QueryParseError(o,s.start,s.end);if(t.currentClause.editDistance=i,n=t.peekLexeme(),n==null)return void t.nextClause();switch(n.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:throw o="Unexpected lexeme type '"+n.type+"'",new e.QueryParseError(o,n.start,n.end)}}},e.QueryParser.parseBoost=function(t){var n,o,i,s=t.consumeLexeme();if(s!=null){if(i=parseInt(s.str,10),isNaN(i))throw o="boost must be numeric",new e.QueryParseError(o,s.start,s.end);if(t.currentClause.boost=i,n=t.peekLexeme(),n==null)return void t.nextClause();switch(n.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;case e.QueryLexer.PRESENCE:return t.nextClause(),e.QueryParser.parsePresence;default:throw o="Unexpected lexeme type '"+n.type+"'",new e.QueryParseError(o,n.start,n.end)}}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,s){i={features:null,bind:function(e,t,n,s){var o,i=(s?"remove":"add")+"EventListener";t=t.split(" ");for(o=0;o<t.length;o++)t[o]&&e[i](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return e!==void 0?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var s=e.length;s--;)if(e[s][n]===t)return s;return-1},extend:function(e,t,n){for(var s in t)if(t.hasOwnProperty(s)){if(n&&e.hasOwnProperty(s))continue;e[s]=t[s]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var n,s,o,a,r,c,l,d,u,h,m,f=i.createEl(),p=f.style,t="",e={};e.oldIE=document.all&&!document.addEventListener,e.touch="ontouchstart"in window,window.requestAnimationFrame&&(e.raf=window.requestAnimationFrame,e.caf=window.cancelAnimationFrame),e.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,e.pointerEvent||(d=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n&&n.length>0&&(n=parseInt(n[1],10),n>=1&&n<8&&(e.isOldIOSPhone=!0))),c=d.match(/Android\s([0-9.]*)/),s=c?c[1]:0,s=parseFloat(s),s>=1&&(s<4.4&&(e.isOldAndroid=!0),e.androidVersion=s),e.isMobileOpera=/opera mini|opera mobi/i.test(d)),h=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"];for(r=0;r<4;r++){t=m[r];for(a=0;a<3;a++)o=h[a],l=t+(t?o.charAt(0).toUpperCase()+o.slice(1):o),!e[o]&&l in p&&(e[o]=l);t&&!e.raf&&(t=t.toLowerCase(),e.raf=window[t+"RequestAnimationFrame"],e.raf&&(e.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}return e.raf||(u=0,e.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),s=window.setTimeout(function(){e(t+n)},n);return u=t+n,s},e.caf=function(e){clearTimeout(e)}),e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=e,e}},i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,s){t=t.split(" ");for(var o,a=(s?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},i=0;i<t.length;i++)if(o=t[i],o)if(typeof n=="object"&&n.handleEvent){if(s){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)}),o=this,dt=25,L=3,a={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return e.tagName==="A"},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"},i.extend(a,s);var o,i,a,c,l,u,h,f,b,y,E,S,F,D,N,L,R,P,B,$,Y,Q,Z,W=function(){return{x:0,y:0}},ge,Kt,_t,nn,K=W(),je=W(),r=W(),Ee,Ye,v={},oe,st,St,Mt,Ue,X=0,de={},C=W(),Zt,M=0,$e,He,Le,De,be,qe=!0,mt=[],Je,ut,$t,Nt,at,se,ye={},ae=!1,it,Ne=function(e,t){i.extend(o,t.publicMethods),mt.push(e)},nt=function(e){var t=k();return e>t-1?e-t:e<0?t+e:e},we={},m=function(e,t){return we[e]||(we[e]=[]),we[e].push(t)},d=function(e){var t,s,n=we[e];if(n){s=Array.prototype.slice.call(arguments),s.shift();for(t=0;t<n.length;t++)n[t].apply(o,s)}},z=function(){return(new Date).getTime()},I=function(e){Be=e,o.bg.style.opacity=e*a.bgOpacity},Wt=function(e,t,n,s,i){(!ae||i&&i!==o.currItem)&&(s=s/(i?i.fitRatio:o.currItem.fitRatio)),e[be]=st+t+"px, "+n+"px"+St+" scale("+s+")"},g=function(e){D&&(e&&(u>o.currItem.fitRatio?ae||(ie(o.currItem,!1,!0),ae=!0):ae&&(ie(o.currItem),ae=!1)),Wt(D,r.x,r.y,u))},Ae=function(e){e.container&&Wt(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},me=function(e,t){t[be]=st+e+"px, 0px"+St},We=function(e,t){if(!a.loop&&t){var s=l+(C.x*X-e)/C.x,n=Math.round(e-H.x);(s<0&&n>0||s>=k()-1&&n<0)&&(e=H.x+n*a.mainScrollEndFriction)}H.x=e,me(e,nn)},gt=function(e,t){var n=ke[e]-de[e];return je[e]+K[e]+n-n*(t/oe)},_=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ut=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},jt=null,yt=function(){jt&&(i.unbind(document,"mousemove",yt),i.addClass(e,"pswp--has_mouse"),a.mouseUsed=!0,d("mouseUsed")),jt=setTimeout(function(){jt=null},100)},Cn=function(){i.bind(document,"keydown",o),h.transform&&i.bind(o.scrollWrap,"click",o),a.mouseUsed||i.bind(document,"mousemove",yt),i.bind(window,"resize scroll orientationchange",o),d("bindEvents")},Dn=function(){i.unbind(window,"resize scroll orientationchange",o),i.unbind(window,"scroll",b.scroll),i.unbind(document,"keydown",o),i.unbind(document,"mousemove",yt),h.transform&&i.unbind(o.scrollWrap,"click",o),F&&i.unbind(window,Ee,o),clearTimeout(it),d("unbindEvents")},Et=function(e,t){var n=Me(o.currItem,v,e);return t&&(c=n),n},dn=function(e){return e||(e=o.currItem),e.initialZoomLevel},on=function(e){return e||(e=o.currItem),e.w>0?a.maxSpreadZoom:1},Dt=function(e,t,n,s){return s===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=gt(e,s),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},wn=function(){if(be){var t=h.perspective&&!R;st="translate"+(t?"3d(":"("),St=h.perspective?", 0px)":")";return}be="left",i.addClass(e,"pswp--ie"),me=function(e,t){t.left=e+"px"},Ae=function(e){var n=e.fitRatio>1?1:e.fitRatio,t=e.container.style,s=n*e.w,o=n*e.h;t.width=s+"px",t.height=o+"px",t.left=e.initialPosition.x+"px",t.top=e.initialPosition.y+"px"},g=function(){if(D){var e=D,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,s=n*t.w,i=n*t.h;e.width=s+"px",e.height=i+"px",e.left=r.x+"px",e.top=r.y+"px"}}},vn=function(e){var t="";a.escKey&&e.keyCode===27?t="close":a.arrowKeys&&(e.keyCode===37?t="prev":e.keyCode===39&&(t="next")),t&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]())},gn=function(e){if(!e)return;(ce||te||y||Ce)&&(e.preventDefault(),e.stopPropagation())},an=function(){o.setScrollOffset(0,i.getScrollY())},x={},le=0,Se=function(e){x[e]&&(x[e].raf&&ut(x[e].raf),le--,delete x[e])},kt=function(e){x[e]&&Se(e),x[e]||(le++,x[e]={})},Fe=function(){for(var e in x)x.hasOwnProperty(e)&&Se(e)},Te=function(e,t,n,s,o,i,a){var r,c,l=z();kt(e),c=function(){if(x[e]){if(r=z()-l,r>=s){Se(e),i(n),a&&a();return}i((n-t)*o(r/s)+t),x[e].raf=Je(c)}},c()},yn={shout:d,listen:m,viewportSize:v,options:a,isMainScrollAnimating:function(){return y},getZoomLevel:function(){return u},getCurrentIndex:function(){return l},isDragging:function(){return F},isZooming:function(){return P},setScrollOffset:function(e,t){de.x=e,se=de.y=t,d("updateScrollOffset",de)},applyZoomPan:function(e,t,n,s){r.x=t,r.y=n,u=e,g(s)},init:function(){if(ge||Kt)return;o.framework=i,o.template=e,o.bg=i.getChildByClass(e,"pswp__bg"),$t=e.className,ge=!0,h=i.detectFeatures(),Je=h.raf,ut=h.caf,be=h.transform,at=h.oldIE,o.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),o.container=i.getChildByClass(o.scrollWrap,"pswp__container"),nn=o.container.style,o.itemHolders=f=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],f[0].el.style.display=f[2].el.style.display="none",wn(),b={resize:o.updateSize,orientationchange:function(){clearTimeout(it),it=setTimeout(function(){v.x!==o.scrollWrap.clientWidth&&o.updateSize()},500)},scroll:an,keydown:vn,click:gn};var n,s,r,c=h.isOldIOSPhone||h.isOldAndroid||h.isMobileOpera;(!h.animationName||!h.transform||c)&&(a.showAnimationDuration=a.hideAnimationDuration=0);for(n=0;n<mt.length;n++)o["init"+mt[n]]();t&&(r=o.ui=new t(o,i),r.init()),d("firstUpdate"),l=l||a.index||0,(isNaN(l)||l<0||l>=k())&&(l=0),o.currItem=G(l),(h.isOldIOSPhone||h.isOldAndroid)&&(qe=!1),e.setAttribute("aria-hidden","false"),a.modal&&(qe?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),se===void 0&&(d("initialLayout"),se=Nt=i.getScrollY()),s="pswp--open ",a.mainClass&&(s+=a.mainClass+" "),a.showHideOpacity&&(s+="pswp--animate_opacity "),s+=R?"pswp--touch":"pswp--notouch",s+=h.animationName?" pswp--css_animation":"",s+=h.svg?" pswp--svg":"",i.addClass(e,s),o.updateSize(),N=-1,M=null;for(n=0;n<L;n++)me((n+N)*C.x,f[n].el.style);at||i.bind(o.scrollWrap,Ye,o),m("initialZoomInEnd",function(){o.setContent(f[0],l-1),o.setContent(f[2],l+1),f[0].el.style.display=f[2].el.style.display="block",a.focus&&e.focus(),Cn()}),o.setContent(f[1],l),o.updateCurrItem(),d("afterInit"),qe||(Mt=setInterval(function(){!le&&!F&&!P&&u===o.currItem.initialZoomLevel&&o.updateSize()},1e3)),i.addClass(e,"pswp--visible")},close:function(){if(!ge)return;ge=!1,Kt=!0,d("close"),Dn(),Xt(o.currItem,null,!0,o.destroy)},destroy:function(){d("destroy"),Z&&clearTimeout(Z),e.setAttribute("aria-hidden","true"),e.className=$t,Mt&&clearInterval(Mt),i.unbind(o.scrollWrap,Ye,o),i.unbind(window,"scroll",o),xt(),Fe(),we=null},panTo:function(e,t,n){n||(e>c.min.x?e=c.min.x:e<c.max.x&&(e=c.max.x),t>c.min.y?t=c.min.y:t<c.max.y&&(t=c.max.y)),r.x=e,r.y=t,g()},handleEvent:function(e){e=e||window.event,b[e.type]&&b[e.type](e)},goTo:function(e){e=nt(e);var t=e-l;M=t,l=e,o.currItem=G(l),X-=t,We(C.x*X),Fe(),y=!1,o.updateCurrItem()},next:function(){o.goTo(l+1)},prev:function(){o.goTo(l-1)},updateCurrZoomItem:function(e){if(e&&d("beforeChange",0),f[1].el.children.length){var t=f[1].el.children[0];i.hasClass(t,"pswp__zoom-wrap")?D=t.style:D=null}else D=null;c=o.currItem.bounds,oe=u=o.currItem.initialZoomLevel,r.x=c.center.x,r.y=c.center.y,e&&d("afterChange")},invalidateCurrItems:function(){Ue=!0;for(var e=0;e<L;e++)f[e].item&&(f[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(M===0)return;var t,s,i,n=Math.abs(M);if(e&&n<2)return;o.currItem=G(l),ae=!1,d("beforeChange",M),n>=L&&(N+=M+(M>0?-L:L),n=L);for(s=0;s<n;s++)M>0?(t=f.shift(),f[L-1]=t,N++,me((N+2)*C.x,t.el.style),o.setContent(t,l-n+s+1+1)):(t=f.pop(),f.unshift(t),N--,me(N*C.x,t.el.style),o.setContent(t,l+n-s-1-1));D&&Math.abs(M)===1&&(i=G(Zt),i.initialZoomLevel!==u&&(Me(i,v),ie(i),Ae(i))),M=0,o.updateCurrZoomItem(),Zt=l,d("afterChange")},updateSize:function(t){if(!qe&&a.modal){var n,s,h,m,p=i.getScrollY();if(se!==p&&(e.style.top=p+"px",se=p),!t&&ye.x===window.innerWidth&&ye.y===window.innerHeight)return;ye.x=window.innerWidth,ye.y=window.innerHeight,e.style.height=ye.y+"px"}if(v.x=o.scrollWrap.clientWidth,v.y=o.scrollWrap.clientHeight,an(),C.x=v.x+Math.round(v.x*a.spacing),C.y=v.y,We(C.x*X),d("beforeResize"),N!==void 0){for(h=0;h<L;h++)m=f[h],me((h+N)*C.x,m.el.style),s=l+h-1,a.loop&&k()>2&&(s=nt(s)),n=G(s),n&&(Ue||n.needsUpdate||!n.bounds)?(o.cleanSlide(n),o.setContent(m,s),h===1&&(o.currItem=n,o.updateCurrZoomItem(!0)),n.needsUpdate=!1):m.index===-1&&s>=0&&o.setContent(m,s),n&&n.container&&(Me(n,v),ie(n),Ae(n));Ue=!1}oe=u=o.currItem.initialZoomLevel,c=o.currItem.bounds,c&&(r.x=c.center.x,r.y=c.center.y,g(!0)),d("resize")},zoomTo:function(e,t,n,s,o){t&&(oe=u,ke.x=Math.abs(t.x)-r.x,ke.y=Math.abs(t.y)-r.y,_(je,r));var c,l,d,h=Et(e,!1),a={};Dt("x",h,a,e),Dt("y",h,a,e),l=u,c={x:r.x,y:r.y},Ut(a),d=function(t){t===1?(u=e,r.x=a.x,r.y=a.y):(u=(e-l)*t+l,r.x=(a.x-c.x)*t+c.x,r.y=(a.y-c.y)*t+c.y),o&&o(t),g(t===1)},n?Te("customZoomTo",0,1,n,s||i.easing.sine.inOut,d):d(1)}},Qt=30,Tt=10,dt,Rt,Re,O={},ne={},j={},w={},fe={},V=[],re={},ze,ee=[],ue={},ft,Ce,xe,Qe=0,Ze=W(),ht=0,Ct,te,ce,tt,Bt,Vt,H=W(),ke=W(),he=W(),vt,Ve,Be,Ie,En=function(e,t){return e.x===t.x&&e.y===t.y},xn=function(e,t){return Math.abs(e.x-t.x)<dt&&Math.abs(e.y-t.y)<dt},Jt=function(e,t){return ue.x=Math.abs(e.x-t.x),ue.y=Math.abs(e.y-t.y),Math.sqrt(ue.x*ue.x+ue.y*ue.y)},xt=function(){tt&&(ut(tt),tt=null)},cn=function(){F&&(tt=Je(cn),Fn())},mn=function(){return a.scaleMode!=="fit"||u!==o.currItem.initialZoomLevel},ln=function(e,t){return!!e&&e!==document&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:ln(e.parentNode,t))},At={},sn=function(e,t){return At.prevent=!ln(e.target,a.isClickableElement),d("preventDragEvent",e,t,At),At.prevent},tn=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},en=function(e,t,n){n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5},_n=function(e,t,n){if(e-Re>50){var s=ee.length>2?ee.shift():{};s.x=t,s.y=n,ee.push(s),Re=e}},Pt=function(){var e=r.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(v.y/2))},_e={},Nn={},U=[],Pe,ot=function(e){for(;U.length>0;)U.pop();return $?(Pe=0,V.forEach(function(e){Pe===0?U[0]=e:Pe===1&&(U[1]=e),Pe++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(U[0]=tn(e.touches[0],_e),e.touches.length>1&&(U[1]=tn(e.touches[1],Nn))):(_e.x=e.pageX,_e.y=e.pageY,_e.id="",U[0]=_e),U},Ht=function(e,t){var s,i,d,m,f=0,n=r[e]+t[e],p=t[e]>0,l=H.x+t.x,h=H.x-re.x;if(n>c.min[e]||n<c.max[e]?i=a.panEndFriction:i=1,n=r[e]+t[e]*i,(a.allowPanToNext||u===o.currItem.initialZoomLevel)&&(D?B==="h"&&e==="x"&&!te&&(p?(n>c.min[e]&&(i=a.panEndFriction,f=c.min[e]-n,d=c.min[e]-je[e]),(d<=0||h<0)&&k()>1?(s=l,h<0&&l>re.x&&(s=re.x)):c.min.x!==c.max.x&&(m=n)):(n<c.max[e]&&(i=a.panEndFriction,f=n-c.max[e],d=je[e]-c.max[e]),(d<=0||h>0)&&k()>1?(s=l,h>0&&l<re.x&&(s=re.x)):c.min.x!==c.max.x&&(m=n))):s=l,e==="x"))return s!==void 0&&(We(s,!0),s===re.x?Q=!1:Q=!0),c.min.x!==c.max.x&&(m!==void 0?r.x=m:Q||(r.x+=t.x*i)),s!==void 0;y||Q||u>o.currItem.fitRatio&&(r[e]+=t[e]*i)},zn=function(e){if(e.type==="mousedown"&&e.button>0)return;if(ve){e.preventDefault();return}if(xe&&e.type==="mousedown")return;sn(e,!0)&&e.preventDefault(),d("pointerDown"),$&&(n=i.arraySearch(V,e.pointerId,"id"),n<0&&(n=V.length),V[n]={x:e.pageX,y:e.pageY,id:e.pointerId});var n,t=ot(e),s=t.length;S=null,Fe(),(!F||s===1)&&(F=vt=!0,i.bind(window,Ee,o),ft=Ie=Ve=Ce=Q=ce=Ct=te=!1,B=null,d("firstTouchStart",t),_(je,r),K.x=K.y=0,_(w,t[0]),_(fe,w),re.x=C.x*X,ee=[{x:w.x,y:w.y}],Re=Rt=z(),Et(u,!0),xt(),cn()),!P&&s>1&&!y&&!Q&&(oe=u,te=!1,P=Ct=!0,K.y=K.x=0,_(je,r),_(O,t[0]),_(ne,t[1]),en(O,ne,he),ke.x=Math.abs(he.x)-r.x,ke.y=Math.abs(he.y)-r.y,Bt=Vt=Jt(O,ne))},Tn=function(e){if(e.preventDefault(),$){var t,n,s,o=i.arraySearch(V,e.pointerId,"id");o>-1&&(n=V[o],n.x=e.pageX,n.y=e.pageY)}F&&(t=ot(e),!B&&!ce&&!P?H.x!==C.x*X?B="h":(s=Math.abs(t[0].x-w.x)-Math.abs(t[0].y-w.y),Math.abs(s)>=Tt&&(B=s>0?"h":"v",S=t)):S=t)},Fn=function(){if(!S)return;if(s=S.length,s===0)return;if(_(O,S[0]),j.x=O.x-w.x,j.y=O.y-w.y,P&&s>1){if(w.x=O.x,w.y=O.y,!j.x&&!j.y&&En(S[1],ne))return;_(ne,S[1]),te||(te=!0,d("zoomGestureStarted")),i=Jt(O,ne),e=hn(i),e>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(Ie=!0);var e,s,i,h,m,f,p,t=1,n=dn(),l=on();e<n?a.pinchToClose&&!Ie&&oe<=o.currItem.initialZoomLevel?(f=n-e,h=1-f/(n/1.2),I(h),d("onPinchClose",h),Ve=!0):(t=(n-e)/n,t>1&&(t=1),e=n-t*(n/3)):e>l&&(t=(e-l)/(n*6),t>1&&(t=1),e=l+t*n),t<0&&(t=0),Bt=i,en(O,ne,Ze),K.x+=Ze.x-he.x,K.y+=Ze.y-he.y,_(he,Ze),r.x=gt("x",e),r.y=gt("y",e),ft=e>u,u=e,g()}else{if(!B)return;if(vt&&(vt=!1,Math.abs(j.x)>=Tt&&(j.x-=S[0].x-fe.x),Math.abs(j.y)>=Tt&&(j.y-=S[0].y-fe.y)),w.x=O.x,w.y=O.y,j.x===0&&j.y===0)return;if(B==="v"&&a.closeOnVerticalDrag&&!mn()){K.y+=j.y,r.y+=j.y,m=Pt(),Ce=!0,d("onVerticalDrag",m),I(m),g();return}_n(z(),O.x,O.y),ce=!0,c=o.currItem.bounds,p=Ht("x",j),p||(Ht("y",j),Ut(r),g())}},Mn=function(e){if(h.isOldAndroid){if(xe&&e.type==="mouseup")return;e.type.indexOf("touch")>-1&&(clearTimeout(xe),xe=setTimeout(function(){xe=0},600))}d("pointerUp"),sn(e,!1)&&e.preventDefault(),$&&(l=i.arraySearch(V,e.pointerId,"id"),l>-1&&(t=V.splice(l,1)[0],navigator.msPointerEnabled?(p={4:"mouse",2:"touch",3:"pen"},t.type=p[e.pointerType],t.type||(t.type=e.pointerType||"mouse")):t.type=e.pointerType||"mouse"));var t,s,c,l,m,f,p,b,j,v=ot(e),n=v.length;if(e.type==="mouseup"&&(n=0),n===2)return S=null,!0;if(n===1&&_(fe,v[0]),n===0&&!B&&!y&&(t||(e.type==="mouseup"?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),d("touchRelease",e,t)),c=-1,n===0&&(F=!1,i.unbind(window,Ee,o),xt(),P?c=0:ht!==-1&&(c=z()-ht)),ht=n===1?z():-1,c!==-1&&c<150?s="zoom":s="swipe",P&&n<2&&(P=!1,n===1&&(s="zoomPointerUp"),d("zoomGestureEnded")),S=null,!ce&&!te&&!y&&!Ce)return;if(Fe(),ze||(ze=Sn()),ze.calculateSwipeSpeed("x"),Ce){b=Pt(),b<a.verticalDragRange?o.close():(m=r.y,f=Be,Te("verticalDrag",0,1,300,i.easing.cubic.out,function(e){r.y=(o.currItem.initialPosition.y-m)*e+m,I((1-f)*e+f),g()}),d("onVerticalDrag",1));return}if((Q||y)&&n===0){if(j=kn(s,ze),j)return;s="zoomPointerUp"}if(y)return;if(s!=="swipe"){On();return}!Q&&u>o.currItem.fitRatio&&An(ze)},Sn=function(){var t,n,e={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(s){ee.length>1?(t=z()-Re+50,n=ee[ee.length-2][s]):(t=z()-Rt,n=fe[s]),e.lastFlickOffset[s]=w[s]-n,e.lastFlickDist[s]=Math.abs(e.lastFlickOffset[s]),e.lastFlickDist[s]>20?e.lastFlickSpeed[s]=e.lastFlickOffset[s]/t:e.lastFlickSpeed[s]=0,Math.abs(e.lastFlickSpeed[s])<.1&&(e.lastFlickSpeed[s]=0),e.slowDownRatio[s]=.95,e.slowDownRatioReverse[s]=1-e.slowDownRatio[s],e.speedDecelerationRatio[s]=1},calculateOverBoundsAnimOffset:function(t,n){e.backAnimStarted[t]||(r[t]>c.min[t]?e.backAnimDestination[t]=c.min[t]:r[t]<c.max[t]&&(e.backAnimDestination[t]=c.max[t]),e.backAnimDestination[t]!==void 0&&(e.slowDownRatio[t]=.7,e.slowDownRatioReverse[t]=1-e.slowDownRatio[t],e.speedDecelerationRatioAbs[t]<.05&&(e.lastFlickSpeed[t]=0,e.backAnimStarted[t]=!0,Te("bounceZoomPan"+t,r[t],e.backAnimDestination[t],n||300,i.easing.sine.out,function(e){r[t]=e,g()}))))},calculateAnimOffset:function(t){e.backAnimStarted[t]||(e.speedDecelerationRatio[t]=e.speedDecelerationRatio[t]*(e.slowDownRatio[t]+e.slowDownRatioReverse[t]-e.slowDownRatioReverse[t]*e.timeDiff/10),e.speedDecelerationRatioAbs[t]=Math.abs(e.lastFlickSpeed[t]*e.speedDecelerationRatio[t]),e.distanceOffset[t]=e.lastFlickSpeed[t]*e.speedDecelerationRatio[t]*e.timeDiff,r[t]+=e.distanceOffset[t])},panAnimLoop:function(){if(x.zoomPan&&(x.zoomPan.raf=Je(e.panAnimLoop),e.now=z(),e.timeDiff=e.now-e.lastNow,e.lastNow=e.now,e.calculateAnimOffset("x"),e.calculateAnimOffset("y"),g(),e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),e.speedDecelerationRatioAbs.x<.05&&e.speedDecelerationRatioAbs.y<.05)){r.x=Math.round(r.x),r.y=Math.round(r.y),g(),Se("zoomPan");return}}};return e},An=function(e){if(e.calculateSwipeSpeed("y"),c=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;kt("zoomPan"),e.lastNow=z(),e.panAnimLoop()},kn=function(e,t){if(y||(Qe=l),e==="swipe"){var n,s,r,c,u,f,h=w.x-fe.x,m=t.lastFlickDist.x<10;h>Qt&&(m||t.lastFlickOffset.x>20)?r=-1:h<-Qt&&(m||t.lastFlickOffset.x<-20)&&(r=1)}return r&&(l+=r,l<0?(l=a.loop?k()-1:0,u=!0):l>=k()&&(l=a.loop?0:k()-1,u=!0),(!u||a.loop)&&(M+=r,X-=r,s=!0)),c=C.x*X,f=Math.abs(c-H.x),!s&&c>H.x!==t.lastFlickSpeed.x>0?n=333:(n=Math.abs(t.lastFlickSpeed.x)>0?f/Math.abs(t.lastFlickSpeed.x):333,n=Math.min(n,400),n=Math.max(n,250)),Qe===l&&(s=!1),y=!0,d("mainScrollAnimStart"),Te("mainScroll",H.x,c,n,i.easing.cubic.out,We,function(){Fe(),y=!1,Qe=-1,(s||Qe!==l)&&o.updateCurrItem(),d("mainScrollAnimComplete")}),s&&o.updateCurrItem(!0),s},hn=function(e){return 1/Vt*e*oe},On=function(){var n,a,r,e=u,t=dn(),s=on();return u<t?e=t:u>s&&(e=s),a=1,n=Be,Ve&&!ft&&!Ie&&u<t?(o.close(),!0):(Ve&&(r=function(e){I((a-n)*e+n)}),o.zoomTo(e,0,200,i.easing.cubic.out,r),!0)},Ge,Xe;Ne("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,s,o){$e=e+t,He=e+n,Le=e+s,o?De=e+o:De=""};$=h.pointerEvent,$&&h.touch&&(h.touch=!1),$?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):h.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),Ee=He+" "+Le+" "+De,Ye=$e,$&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=R,b[$e]=zn,b[He]=Tn,b[Le]=Mn,De&&(b[De]=b[Le]),h.touch&&(Ye+=" mousedown",Ee+=" mousemove mouseup",b.mousedown=b[$e],b.mousemove=b[He],b.mouseup=b[Le]),R||(a.allowPanToNext=!1)}}});var k,q,G,Z,Xt=function(t,n,s,c){Z&&clearTimeout(Z),ve=!0,Ft=!0,t.initialLayout?(h=t.initialLayout,t.initialLayout=null):h=a.getThumbBoundsFn&&a.getThumbBoundsFn(l);var h,p,m=s?a.hideAnimationDuration:a.showAnimationDuration,f=function(){Se("initialZoom"),s?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(I(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),d("initialZoom"+(s?"OutEnd":"InEnd"))),c&&c(),ve=!1};if(!m||!h||h.x===void 0){d("initialZoom"+(s?"Out":"In")),u=t.initialZoomLevel,_(r,t.initialPosition),g(),e.style.opacity=s?0:1,I(1),m?setTimeout(function(){f()},m):f();return}p=function(){var c=_t,n=!o.currItem.src||o.currItem.loadError||a.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),s||(u=h.w/t.w,r.x=h.x,r.y=h.y-Nt,o[n?"template":"bg"].style.opacity=.001,g()),kt("initialZoom"),s&&!c&&i.removeClass(e,"pswp--animated-in"),n&&(s?i[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){i.addClass(e,"pswp--animate_opacity")},30)),Z=setTimeout(function(){if(d("initialZoom"+(s?"Out":"In")),s){var a=h.w/t.w,o={x:r.x,y:r.y},l=u,p=Be,v=function(t){t===1?(u=a,r.x=h.x,r.y=h.y-se):(u=(a-l)*t+l,r.x=(h.x-o.x)*t+o.x,r.y=(h.y-se-o.y)*t+o.y),g(),n?e.style.opacity=1-t:I(p-t*p)};c?Te("initialZoom",0,1,m,i.easing.cubic.out,v,f):(v(1),Z=setTimeout(f,m+20))}else u=t.initialZoomLevel,_(r,t.initialPosition),g(),I(1),n?e.style.opacity=1:I(1),Z=setTimeout(f,m+20)},s?25:90)},p()},A={},J=[],Ft,ve,bn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return q.length}},pn,rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},fn=function(e,t,n){var s=e.bounds;s.center.x=Math.round((A.x-t)/2),s.center.y=Math.round((A.y-n)/2)+e.vGap.top,s.max.x=t>A.x?Math.round(A.x-t):s.center.x,s.max.y=n>A.y?Math.round(A.y-n)+e.vGap.top:s.center.y,s.min.x=t>A.x?0:s.center.x,s.min.y=n>A.y?e.vGap.top:s.center.y},Me=function(e,t,n){if(e.src&&!e.loadError){var o,i,r,s=!n;if(s&&(e.vGap||(e.vGap={top:0,bottom:0}),d("parseVerticalMargin",e)),A.x=t.x,A.y=t.y-e.vGap.top-e.vGap.bottom,s&&(o=A.x/e.w,i=A.y/e.h,e.fitRatio=o<i?o:i,r=a.scaleMode,r==="orig"?n=1:r==="fit"&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=rn())),!n)return;return fn(e,e.w*n,e.h*n),s&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=rn(),e.initialPosition=e.bounds.center,e.bounds},Ke=function(e,t,n,s,i,a){if(t.loadError)return;s&&(t.imageAppended=!0,ie(t,s,t===o.currItem&&ae),n.appendChild(s),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},un=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},Yt=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=a.errorMsg.replace("%url%",e.src),!0},ie=function(e,t,n){if(!e.src)return;t||(t=e.container.lastChild);var s=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=s+"px",e.placeholder.style.height=o+"px"),t.style.width=s+"px",t.style.height=o+"px"},zt=function(){if(J.length){for(var e,t=0;t<J.length;t++)e=J[t],e.holder.index===e.index&&Ke(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);J=[]}};Ne("Controller",{publicMethods:{lazyLoadItem:function(e){e=nt(e);var t=G(e);if(!t||(t.loaded||t.loading)&&!Ue)return;if(d("gettingData",e,t),!t.src)return;un(t)},initController:function(){i.extend(a,bn,!0),o.items=q=n,G=o.getItemAt,k=a.getNumItemsFn,pn=a.loop,k()<3&&(a.loop=!1),m("beforeChange",function(e){var t,n=a.preload,s=e===null||e>=0,i=Math.min(n[0],k()),r=Math.min(n[1],k());for(t=1;t<=(s?r:i);t++)o.lazyLoadItem(l+t);for(t=1;t<=(s?i:r);t++)o.lazyLoadItem(l-t)}),m("initialLayout",function(){o.currItem.initialLayout=a.getThumbBoundsFn&&a.getThumbBoundsFn(l)}),m("mainScrollAnimComplete",zt),m("initialZoomInEnd",zt),m("destroy",function(){for(var e,t=0;t<q.length;t++)e=q[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);J=null})},getItemAt:function(e){return e>=0&&q[e]!==void 0&&q[e]},allowProgressiveImg:function(){return a.forceProgressiveLoading||!R||a.mouseUsed||screen.width>1200},setContent:function(e,t){a.loop&&(t=nt(t));var n,s,r,c,u,m=o.getItemAt(e.index);if(m&&(m.container=null),n=o.getItemAt(t),!n){e.el.innerHTML="";return}d("gettingData",t,n),e.index=t,e.item=n,s=n.container=i.createEl("pswp__zoom-wrap"),!n.src&&n.html&&(n.html.tagName?s.appendChild(n.html):s.innerHTML=n.html),Yt(n),Me(n,v),n.src&&!n.loadError&&!n.loaded?(n.loadComplete=function(n){if(!ge)return;if(e&&e.index===t){if(Yt(n,!0)){n.loadComplete=n.img=null,Me(n,v),Ae(n),e.index===l&&o.updateCurrZoomItem();return}n.imageAppended?!ve&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):h.transform&&(y||ve)?J.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):Ke(t,n,s,n.img,y||ve,!0)}n.loadComplete=null,n.img=null,d("imageLoadComplete",t,n)},i.features.transform&&(u="pswp__img pswp__img--placeholder",u+=n.msrc?"":" pswp__img--placeholder--blank",c=i.createEl(u,n.msrc?"img":""),n.msrc&&(c.src=n.msrc),ie(n,c),s.appendChild(c),n.placeholder=c),n.loading||un(n),o.allowProgressiveImg()&&(!Ft&&h.transform?J.push({item:n,baseDiv:s,img:n.img,index:t,holder:e}):Ke(t,n,s,n.img,!0,!0))):n.src&&!n.loadError&&(r=i.createEl("pswp__img","img"),r.style.opacity=1,r.src=n.src,ie(n,r),Ke(t,n,s,r,!0)),!Ft&&t===l?(D=s.style,Xt(n,r||n.img)):Ae(n),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}}),Ge={},Xe=function(e,t,n){var s=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};s.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(s)},Ne("Tap",{publicMethods:{initTap:function(){m("firstTouchStart",o.onTapStart),m("touchRelease",o.onTapRelease),m("destroy",function(){Ge={},Y=null})},onTapStart:function(e){e.length>1&&(clearTimeout(Y),Y=null)},onTapRelease:function(e,t){if(!t)return;if(!ce&&!Ct&&!le){var s,n=t;if(Y&&(clearTimeout(Y),Y=null,xn(n,Ge))){d("doubleTap",n);return}if(t.type==="mouse"){Xe(e,t,"mouse");return}if(s=e.target.tagName.toUpperCase(),s==="BUTTON"||i.hasClass(e.target,"pswp__single-tap")){Xe(e,t);return}_(Ge,n),Y=setTimeout(function(){Xe(e,t),Y=null},300)}}}}),Ne("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(at)return;R?m("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0)},setupDesktopZoom:function(t){E={},n="wheel mousewheel DOMMouseScroll",m("bindEvents",function(){i.bind(e,n,o.handleMouseWheel)}),m("unbindEvents",function(){E&&i.unbind(e,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var n,s,a=function(){o.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),u<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),r()},r=function(){s&&(i.removeClass(e,"pswp--dragging"),s=!1)};m("resize",a),m("afterChange",a),m("pointerDown",function(){o.mouseZoomedIn&&(s=!0,i.addClass(e,"pswp--dragging"))}),m("pointerUp",r),t||a()},handleMouseWheel:function(e){if(u<=o.currItem.fitRatio)return a.modal&&(!a.closeOnScroll||le||F?e.preventDefault():be&&Math.abs(e.deltaY)>2&&(_t=!0,o.close())),!0;if(e.stopPropagation(),E.x=0,"deltaX"in e)e.deltaMode===1?(E.x=e.deltaX*18,E.y=e.deltaY*18):(E.x=e.deltaX,E.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(E.x=-.16*e.wheelDeltaX),e.wheelDeltaY?E.y=-.16*e.wheelDeltaY:E.y=-.16*e.wheelDelta;else if("detail"in e)E.y=e.detail;else return;Et(u,!0);var t=r.x-E.x,n=r.y-E.y;(a.modal||t<=c.min.x&&t>=c.max.x&&n<=c.min.y&&n>=c.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:v.x/2+de.x,y:v.y/2+de.y};var s=a.getDoubleTapZoom(!0,o.currItem),n=u===s;o.mouseZoomedIn=!n,o.zoomTo(n?o.currItem.initialZoomLevel:s,t,333),i[(n?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var p,T,jn={history:!0,galleryUID:1},Ot,Gt,Oe,et,wt,qt,pe,bt,pt,lt,ct=function(){return T.hash.substring(1)},It=function(){Ot&&clearTimeout(Ot),Oe&&clearTimeout(Oe)},Lt=function(){var t,n,s,i,o=ct(),e={};if(o.length<5)return e;n=o.split("&");for(t=0;t<n.length;t++){if(!n[t])continue;if(s=n[t].split("="),s.length<2)continue;e[s[0]]=s[1]}if(a.galleryPIDs){{i=e.pid,e.pid=0;for(t=0;t<q.length;t++)if(q[t].pid===i){e.pid=t;break}}}else e.pid=parseInt(e.pid,10)-1;return e.pid<0&&(e.pid=0),e},rt=function(){if(Oe&&clearTimeout(Oe),le||F){Oe=setTimeout(rt,500);return}et?clearTimeout(Gt):et=!0;var e,t,n=l+1,s=G(l);s.hasOwnProperty("pid")&&(n=s.pid),e=p+"&gid="+a.galleryUID+"&pid="+n,pe||T.hash.indexOf(e)===-1&&(pt=!0),t=T.href.split("#")[0]+"#"+e,lt?"#"+e!==window.location.hash&&history[pe?"replaceState":"pushState"]("",document.title,t):pe?T.replace(t):T.hash=e,pe=!0,Gt=setTimeout(function(){et=!1},60)};Ne("History",{publicMethods:{initHistory:function(){if(i.extend(a,jn,!0),!a.history)return;T=window.location,pt=!1,bt=!1,pe=!1,p=ct(),lt="pushState"in history,p.indexOf("gid=")>-1&&(p=p.split("&gid=")[0],p=p.split("?gid=")[0]),m("afterChange",o.updateURL),m("unbindEvents",function(){i.unbind(window,"hashchange",o.onHashChange)});var e,t=function(){qt=!0,bt||(pt?history.back():p?T.hash=p:lt?history.pushState("",document.title,T.pathname+T.search):T.hash=""),It()};m("unbindEvents",function(){_t&&t()}),m("destroy",function(){qt||t()}),m("firstUpdate",function(){l=Lt().pid}),e=p.indexOf("pid="),e>-1&&(p=p.substring(0,e),p.slice(-1)==="&"&&(p=p.slice(0,-1))),setTimeout(function(){ge&&i.bind(window,"hashchange",o.onHashChange)},40)},onHashChange:function(){if(ct()===p){bt=!0,o.close();return}et||(wt=!0,o.goTo(Lt().pid),wt=!1)},updateURL:function(){if(It(),wt)return;pe?Ot=setTimeout(rt,800):rt()}}}),i.extend(o,yn)};return e}),function(e,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,o,i,a,l,d,h,g,v,y,_,x,C,S,F,T,z,D,W,s=this,w=!1,c=!0,r=!0,N={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},E=function(e){if(g)return!0;e=e||window.event,n.timeToIdle&&n.mouseUsed&&!v&&b();for(var s,i,a,r=e.target||e.srcElement,c=r.getAttribute("class")||"",o=0;o<p.length;o++)s=p[o],s.onTap&&c.indexOf("pswp__"+s.name)>-1&&(s.onTap(),i=!0);i&&(e.stopPropagation&&e.stopPropagation(),g=!0,a=t.features.isOldAndroid?600:30,W=setTimeout(function(){g=!1},a))},I=function(){return!e.likelyTouchDevice||n.mouseUsed||screen.width>n.fitControlsWidth},u=function(e,n,s){t[(s?"add":"remove")+"Class"](e,"pswp__"+n)},k=function(){var e=n.getNumItemsFn()===1;e!==z&&(u(o,"ui--one-slide",e),z=e)},A=function(){u(l,"share-modal--hidden",r)},m=function(){return r=!r,r?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){r&&A()},300)):(A(),setTimeout(function(){r||t.addClass(l,"pswp__share-modal--fade-in")},30)),r||L(),!1},R=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),r||m(),!1))},L=function(){for(var e,s,i,a,r,t="",o=0;o<n.shareButtons.length;o++)e=n.shareButtons[o],s=n.getImageURLForShare(e),a=n.getPageURLForShare(e),r=n.getTextForShare(e),i=e.url.replace("{{url}}",encodeURIComponent(a)).replace("{{image_url}}",encodeURIComponent(s)).replace("{{raw_image_url}}",s).replace("{{text}}",encodeURIComponent(r)),t+='<a href="'+i+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",n.parseShareButtonOut&&(t=n.parseShareButtonOut(e,t));l.children[0].innerHTML=t,l.children[0].onclick=R},O=function(e){for(var s=0;s<n.closeElClasses.length;s++)if(t.hasClass(e,"pswp__"+n.closeElClasses[s]))return!0},j=0,b=function(){clearTimeout(y),j=0,v&&s.setIdle(!1)},M=function(e){e=e||window.event;var t=e.relatedTarget||e.toElement;(!t||t.nodeName==="HTML")&&(clearTimeout(y),y=setTimeout(function(){s.setIdle(!0)},n.timeToIdleOutside))},P=function(){n.fullscreenEl&&!t.features.isOldAndroid&&(a||(a=s.getFullscreenAPI()),a?(t.bind(document,a.eventK,s.updateFullscreen),s.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},H=function(){n.preloaderEl&&(f(!0),i("beforeChange",function(){clearTimeout(D),D=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&f(!1):f(!0)},n.loadingIndicatorDelay)}),i("imageLoadComplete",function(t,n){e.currItem===n&&f(!0)}))},f=function(e){T!==e&&(u(F,"preloader--active",!e),T=e)},B=function(e){var i,a,s=e.vGap;I()?(i=n.barsSize,n.captionEl&&i.bottom==="auto"?(d||(d=t.createEl("pswp__caption pswp__caption--fake"),d.appendChild(t.createEl("pswp__caption__center")),o.insertBefore(d,h),t.addClass(o,"pswp__ui--fit")),n.addCaptionHTMLFn(e,d,!0)?(a=d.clientHeight,s.bottom=parseInt(a,10)||44):s.bottom=i.top):s.bottom=i.bottom==="auto"?0:i.bottom,s.top=i.top):s.top=s.bottom=0},V=function(){n.timeToIdle&&i("mouseUsed",function(){t.bind(document,"mousemove",b),t.bind(document,"mouseout",M),_=setInterval(function(){j++,j===2&&s.setIdle(!0)},n.timeToIdle/2)})},$=function(){i("onVerticalDrag",function(e){c&&e<.95?s.hideControls():!c&&e>=.95&&s.showControls()});var e;i("onPinchClose",function(t){c&&t<.9?(s.hideControls(),e=!0):e&&!c&&t>.9&&s.showControls()}),i("zoomGestureEnded",function(){e=!1,e&&!c&&s.showControls()})},p=[{name:"caption",option:"captionEl",onInit:function(e){h=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){m()}},{name:"button--share",option:"shareEl",onInit:function(e){C=e},onTap:function(){m()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){S=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){a.isFullscreen()?a.exit():a.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){F=e}}],U=function(){var e,s,i,a,r=function(o){if(!o)return;for(var i,c=o.length,r=0;r<c;r++){e=o[r],a=e.className;for(i=0;i<p.length;i++)s=p[i],a.indexOf("pswp__"+s.name)>-1&&(n[s.option]?(t.removeClass(e,"pswp__element--disabled"),s.onInit&&s.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(o.children),i=t.getChildByClass(o,"pswp__top-bar"),i&&r(i.children)};s.init=function(){t.extend(e.options,N,!0),n=e.options,o=t.getChildByClass(e.scrollWrap,"pswp__ui"),i=e.listen,$(),i("beforeChange",s.update),i("doubleTap",function(t){var s=e.currItem.initialZoomLevel;e.getZoomLevel()!==s?e.zoomTo(s,t,333):e.zoomTo(n.getDoubleTapZoom(!1,e.currItem),t,333)}),i("preventDragEvent",function(e,t,n){var s=e.target||e.srcElement;s&&s.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(s.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(s.tagName))&&(n.prevent=!1)}),i("bindEvents",function(){t.bind(o,"pswpTap click",E),t.bind(e.scrollWrap,"pswpTap",s.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",s.onMouseOver)}),i("unbindEvents",function(){r||m(),_&&clearInterval(_),t.unbind(document,"mouseout",M),t.unbind(document,"mousemove",b),t.unbind(o,"pswpTap click",E),t.unbind(e.scrollWrap,"pswpTap",s.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",s.onMouseOver),a&&(t.unbind(document,a.eventK,s.updateFullscreen),a.isFullscreen()&&(n.hideAnimationDuration=0,a.exit()),a=null)}),i("destroy",function(){n.captionEl&&(d&&o.removeChild(d),t.removeClass(h,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(o,"pswp__ui--over-close"),t.addClass(o,"pswp__ui--hidden"),s.setIdle(!1)}),n.showAnimationDuration||t.removeClass(o,"pswp__ui--hidden"),i("initialZoomIn",function(){n.showAnimationDuration&&t.removeClass(o,"pswp__ui--hidden")}),i("initialZoomOut",function(){t.addClass(o,"pswp__ui--hidden")}),i("parseVerticalMargin",B),U(),n.shareEl&&C&&l&&(r=!0),k(),V(),P(),H()},s.setIdle=function(e){v=e,u(o,"ui--idle",e)},s.update=function(){c&&e.currItem?(s.updateIndexIndicator(),n.captionEl&&(n.addCaptionHTMLFn(e.currItem,h),u(h,"caption--empty",!e.currItem.title)),w=!0):w=!1,r||m(),k()},s.updateFullscreen=function(n){n&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(a.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},s.updateIndexIndicator=function(){n.counterEl&&(S.innerHTML=e.getCurrentIndex()+1+n.indexIndicatorSep+n.getNumItemsFn())},s.onGlobalTap=function(o){o=o||window.event;var i=o.target||o.srcElement;if(g)return;if(o.detail&&o.detail.pointerType==="mouse"){if(O(i)){e.close();return}t.hasClass(i,"pswp__img")&&(e.getZoomLevel()===1&&e.getZoomLevel()<=e.currItem.fitRatio?n.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(o.detail.releasePoint))}else if(n.tapToToggleControls&&(c?s.hideControls():s.showControls()),n.tapToClose&&(t.hasClass(i,"pswp__img")||O(i))){e.close();return}},s.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;u(o,"ui--over-close",O(t))},s.hideControls=function(){t.addClass(o,"pswp__ui--hidden"),c=!1},s.showControls=function(){c=!0,w||s.update(),t.removeClass(o,"pswp__ui--hidden")},s.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},s.getFullscreenAPI=function(){var t,s=document.documentElement,o="fullscreenchange";return s.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:s.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:s.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:s.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(x=n.closeOnScroll,n.closeOnScroll=!1,this.enterK==="webkitRequestFullscreen")e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return e.template[this.enterK]()},t.exit=function(){return n.closeOnScroll=x,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,t){(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!="undefined"?t():typeof define=="function"&&define.amd?define(t):t()})(this,function(){"use strict";function i(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var n,c=setTimeout;function l(){}function d(e,t){return function(){e.apply(t,arguments)}}function e(t){if(!(this instanceof e))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],r(t,this)}function a(n,o){for(;n._state===3;)n=n._value;if(n._state===0){n._deferreds.push(o);return}n._handled=!0,e._immediateFn(function(){var i,e=n._state===1?o.onFulfilled:o.onRejected;if(e===null){(n._state===1?s:t)(o.promise,n._value);return}try{i=e(n._value)}catch(e){t(o.promise,e);return}s(o.promise,i)})}function s(n,s){try{if(s===n)throw new TypeError("A promise cannot be resolved with itself.");if(s&&((typeof s=="undefined"?"undefined":_typeof(s))==="object"||typeof s=="function")){var i=s.then;if(s instanceof e){n._state=3,n._value=s,o(n);return}if(typeof i=="function"){r(d(i,s),n);return}}n._state=1,n._value=s,o(n)}catch(e){t(n,e)}}function t(e,t){e._state=2,e._value=t,o(e)}function o(t){t._state===2&&t._deferreds.length===0&&e._immediateFn(function(){t._handled||e._unhandledRejectionFn(t._value)});for(var n=0,s=t._deferreds.length;n<s;n++)a(t,t._deferreds[n]);t._deferreds=null}function u(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function r(e,n){var o=!1;try{e(function(e){if(o)return;o=!0,s(n,e)},function(e){if(o)return;o=!0,t(n,e)})}catch(e){if(o)return;o=!0,t(n,e)}}e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(e,t){var n=new this.constructor(l);return a(this,new u(e,t,n)),n},e.prototype.finally=i,e.all=function(t){return new e(function(e,n){if(!t||typeof t.length=="undefined")throw new TypeError("Promise.all accepts an array");var o,i,s=Array.prototype.slice.call(t);if(s.length===0)return e([]);i=s.length;function a(t,o){try{if(o&&((typeof o=="undefined"?"undefined":_typeof(o))==="object"||typeof o=="function")){var r=o.then;if(typeof r=="function"){r.call(o,function(e){a(t,e)},n);return}}s[t]=o,--i===0&&e(s)}catch(e){n(e)}}for(o=0;o<s.length;o++)a(o,s[o])})},e.resolve=function(t){return t&&(typeof t=="undefined"?"undefined":_typeof(t))==="object"&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var s=0,o=t.length;s<o;s++)t[s].then(e,n)})},e._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){c(e,0)},e._unhandledRejectionFn=function(t){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")}(),"Promise"in n?n.Promise.prototype.finally||(n.Promise.prototype.finally=i):n.Promise=e}),function(e,t){"use strict";typeof define=="function"&&define.amd?define([],t):(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"?module.exports=t():e.photoswipeSimplify=t()}(this,function(){"use strict";var t,n={target:"[data-pswp]"},s=function(){var s,n={},a=!1,t=0,o=arguments.length,i=function(t){for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s])};for(t=0;t<o;t++)s=arguments[t],i(s);return n},e=function(){};return e.prototype={initialized:!1,pswpElement:"",galleries:[],thumbnails:[],tmps:[],items:[],options:{},ImagesLoaded:!1,init:function(t){var o=this;o.options=s(n,t||{}),o.initialized||(o.append_template(),o.initialized=!0),o.initPhotoSwipe(o.options.target)},append_template:function(){var n=document.getElementsByTagName("body")[0],t=document.createElement("div");t.innerHTML='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div> </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>',n.appendChild(t)},initPhotoSwipe:function(t){var s,o,i,a,r,n=this;if(n.pswpElement=document.querySelectorAll(".pswp")[0],n.galleries=document.querySelectorAll(t),n.galleries.length>0)for(s=0;s<n.galleries.length;s++){if(n.items[s]=[],n.thumbnails[s]=[],n.tmps[s]=n.galleries[s].getElementsByTagName("img"),n.tmps[s]=Array.prototype.slice.call(n.tmps[s]),n.tmps[s].length>0)for(i=0;i<n.tmps[s].length;i++)a=n.tmps[s][i].getAttribute("data-zoom-src"),/(.gif|.jpe?g|.png|.bmp|.webp)/.test(a.toLowerCase())&&n.thumbnails[s].push(n.tmps[s][i]);if(r=new Promise(function(e){n.parseItems(e,s)}),r.then(function(){n.galleryLoaded()}),n.thumbnails[s].length>0)for(o=0;o<n.thumbnails[s].length;o++)n.thumbnails[s][o].setAttribute("data-pswp-index",s),n.thumbnails[s][o].classList.add("pswp--item"),n.attachEvent(n.thumbnails[s][o],s,o)}},galleryLoaded:function(){var t,n=this;if(n.galleries.length>0)for(t=0;t<n.galleries.length;t++)n.galleries[t].classList.add("pswp--loaded")},attachEvent:function(t,n,s){var o=this;t.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add("pswp--launched");var t=document.querySelector(".pswp--active");return t&&t.classList.remove("pswp--active"),o.galleries[n].classList.add("pswp--active"),o.galleries[n].setAttribute("data-pswp-index",s),o.galleries[n].classList.contains("pswp--loaded")&&s>=0&&o.open(n,s),!1})},getImageSizes:function(t,n,s,o,i,a){var r=this;new Promise(function(e){if(t.getAttribute("width")){var l,d=t.getAttribute("width"),u=t.getAttribute("height");r.items[s][o]={src:n,w:parseInt(d,10),h:parseInt(u,10),title:i,author:a},e()}else l=new Image,l.src=n,l.onload=function(){r.items[s][o]={src:n,w:l.naturalWidth,h:l.naturalHeight,title:i,author:a},e()}})},open:function(t,n){var o,s=this,i=s.galleries[t];s.options.galleryUID=t,s.options.index=n,s.options.addCaptionHTMLFn=function(e,t){return e.title?(t.children[0].innerHTML=e.title,e.author&&(t.children[0].innerHTML+="<br><small>"+e.author+"</small>"),!0):(t.children[0].innerText="",!1)},document.body.classList.remove("pswp--launched"),o=new PhotoSwipe(s.pswpElement,PhotoSwipeUI_Default,s.items[t],s.options),o.init()},parseItems:function(t,n){var s,a,r,c,l,o=this,i=[];if(o.thumbnails[n].length>0)for(s=0;s<o.thumbnails[n].length;s++)a=o.thumbnails[n][s],r=o.thumbnails[n][s].getAttribute("data-zoom-src"),c=o.thumbnails[n][s].getAttribute("data-caption"),l=o.thumbnails[n][s].getAttribute("data-author"),i.push(o.getImageSizes(a,r,n,s,c,l)),Promise.all(i).then(function(){t()})}},t=new e,t});function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _extends(){return(_extends=Object.assign||function(e){for(var t,s,n=1;n<arguments.length;n++){t=arguments[n];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";var s="undefined"!=typeof window,_=s&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),D=s&&"IntersectionObserver"in window,y=s&&"classList"in document.createElement("p"),T={elements_selector:"img",container:_||s?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_poster:"poster",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},g=function(e,t){var n,s=new e(t);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:s}})}catch{(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:s})}window.dispatchEvent(n)},e=function(e,t){return e.getAttribute("data-"+t)},c=function(e,t,n){var s="data-"+t;null!==n?e.setAttribute(s,n):e.removeAttribute(s)},f=function(t){return"true"===e(t,"was-processed")},h=function(e,t){return c(e,"ll-timeout",t)},v=function(t){return e(t,"ll-timeout")},n=function(e,t,n,s){e&&(void 0===s?void 0===n?e(t):e(t,n):e(t,n,s))},d=function(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&n(e._settings.callback_finish,e)},m=function(e){for(var t,n=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&n.push(t);return n},t=function(e,t,n){n&&e.setAttribute(t,n)},p=function(n,s){t(n,"sizes",e(n,s.data_sizes)),t(n,"srcset",e(n,s.data_srcset)),t(n,"src",e(n,s.data_src))},C={IMG:function(e,t){var n=e.parentNode;n&&"PICTURE"===n.tagName&&m(n).forEach(function(e){p(e,t)}),p(e,t)},IFRAME:function(n,s){t(n,"src",e(n,s.data_src))},VIDEO:function(n,s){m(n).forEach(function(n){t(n,"src",e(n,s.data_src))}),t(n,"poster",e(n,s.data_poster)),t(n,"src",e(n,s.data_src)),n.load()}},S=function(t,n){var s,o,i=n._settings,r=t.tagName,a=C[r];if(a)return a(t,i),d(n,1),void(n._elements=(s=n._elements,o=t,s.filter(function(e){return e!==o})));!function(t,n){var s=e(t,n.data_src),o=e(t,n.data_bg);s&&(t.style.backgroundImage='url("'.concat(s,'")')),o&&(t.style.backgroundImage=o)}(t,i)},b=function(e,t){y?e.classList.add(t):e.className+=(e.className?" ":"")+t},j=function(e,t){y?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a=function(e,t,n){e.addEventListener(t,n)},o=function(e,t,n){e.removeEventListener(t,n)},w=function(e,t,n){o(e,"load",t),o(e,"loadeddata",t),o(e,"error",n)},O=function(e,t,s){var o=s._settings,a=t?o.class_loaded:o.class_error,r=t?o.callback_loaded:o.callback_error,i=e.target;j(i,o.class_loading),b(i,a),n(r,i,s),d(s,-1)},k=function(e,t){var n=function n(o){O(o,!0,t),w(e,n,s)},s=function s(o){O(o,!1,t),w(e,n,s)};!function(e,t,n){a(e,"load",t),a(e,"loadeddata",t),a(e,"error",n)}(e,n,s)},E=["IMG","IFRAME","VIDEO"],l=function(e,t){var n=t._observer;r(e,t),n&&t._settings.auto_unobserve&&n.unobserve(e)},x=function(e){var t=v(e);t&&(clearTimeout(t),h(e,null))},A=function(e,t){var s=t._settings.load_delay,n=v(e);n||(n=setTimeout(function(){l(e,t),x(e)},s),h(e,n))},r=function(e,t,s){var o=t._settings;!s&&f(e)||(E.indexOf(e.tagName)>-1&&(k(e,t),b(e,o.class_loading)),S(e,t),function(e){c(e,"was-processed","true")}(e),n(o.callback_reveal,e,t),n(o.callback_set,e,t))},M=function(e){return!!D&&(e._observer=new IntersectionObserver(function(t){t.forEach(function(t){return function(e){return e.isIntersecting||e.intersectionRatio>0}(t)?function(e,t,s){var o=s._settings;n(o.callback_enter,e,t,s),o.load_delay?A(e,s):l(e,s)}(t.target,t,e):function(e,t,s){var o=s._settings;n(o.callback_exit,e,t,s),o.load_delay&&x(e)}(t.target,t,e)})},{root:(t=e._settings).container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}),!0);var t},F=["IMG","IFRAME"],u=function(e,t){return function(e){return e.filter(function(e){return!f(e)})}((n=e||function(e){return e.container.querySelectorAll(e.elements_selector)}(t),Array.prototype.slice.call(n)));var n},z=function(e){var t=e._settings;_toConsumableArray(t.container.querySelectorAll("."+t.class_error)).forEach(function(e){j(e,t.class_error),function(e){c(e,"was-processed",null)}(e)}),e.update()},i=function(e,t){var n;this._settings=function(e){return _extends({},T,e)}(e),this._loadingCount=0,M(this),this.update(t),n=this,s&&window.addEventListener("online",function(){z(n)})};return i.prototype={update:function(e){var n,s=this,t=this._settings;this._elements=u(e,t),!_&&this._observer?(function(e){return e.use_native&&"loading"in HTMLImageElement.prototype}(t)&&((n=this)._elements.forEach(function(e){-1!==F.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),r(e,n))}),this._elements=u(e,t)),this._elements.forEach(function(e){s._observer.observe(e)})):this.loadAll()},destroy:function(){var e=this;this._observer&&(this._elements.forEach(function(t){e._observer.unobserve(t)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){r(e,this,t)},loadAll:function(){var e=this;this._elements.forEach(function(t){l(t,e)})}},s&&function(e,t){if(t)if(t.length)for(var n,s=0;n=t[s];s+=1)g(e,n);else g(e,t)}(i,window.lazyLoadOptions),i}),document.addEventListener("DOMContentLoaded",function(){new LazyLoad({elements_selector:".lazyload"}),photoswipeSimplify.init({history:!1,bgOpacity:1,zoomEl:!1,shareEl:!1,counterEl:!1,fullscreenEl:!1,closeEl:!1,captionEl:!1,arrowEl:!1,barsSize:{top:44,bottom:44,left:44,right:44}}),params=new URLSearchParams(window.location.search),params.has("zoom")&&photoswipeSimplify.open(0,0),params.has("session_id")&&fetch("/api/success?session_id="+params.get("session_id"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.querySelector(".thanks").innerText="🎉 Merci pour cet achat, "+e.shipping.name,document.querySelector("#thanksdiv").classList.toggle("hidden")}),form=document.querySelector("#stripe-form"),form&&form.addEventListener("submit",handleFormSubmission)});function handleFormSubmission(e){e.preventDefault(),form=new FormData(e.target),data={price_id:form.get("price_id"),slug:window.location.pathname},fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{stripe=Stripe(e.publishableKey),stripe.redirectToCheckout({sessionId:e.sessionId})}).then(e=>{e.error()&&console.error(e.error())})}